<div>
  <!-- Bloc d'ajout contributeur -->
  <div *ngIf="showAddForm" class="mb-4">
    <div class="custom-modal">
      <div class="modal-header">
        <h5 class="modal-title">Ajouter un contributeur</h5>
        <button
          type="button"
          class="btn-close"
          (click)="hideAddContributorBlock()"
        ></button>
      </div>

      <form
        [formGroup]="addContributorForm"
        (ngSubmit)="onAddContributorSubmit()"
        [ngClass]="{ submitted: isContributorSubmitted }"
      >
        <div formGroupName="contributorData">
          <div class="input-group mt-3 mb-3">
            <label class="input-group-text" for="email">Email</label>
            <input
              id="email"
              class="form-control"
              formControlName="email"
              placeholder="utilisateur@exemple.com"
              type="email"
            />
          </div>

          <div class="input-group mb-3">
            <label class="input-group-text" for="role">Rôle</label>
            <select id="role" class="form-select" formControlName="role">
              <option [value]="Role.ADMINISTRATEUR">
                {{ getRoleLabel(Role.ADMINISTRATEUR) }}
              </option>
              <option [value]="Role.MEMBRE">
                {{ getRoleLabel(Role.MEMBRE) }}
              </option>
              <option [value]="Role.OBSERVATEUR">
                {{ getRoleLabel(Role.OBSERVATEUR) }}
              </option>
            </select>
          </div>
        </div>

        <div class="modal-footer">
          <button
            class="btn btn-secondary"
            type="button"
            (click)="hideAddContributorBlock()"
          >
            Annuler
          </button>
          <button class="btn btn-primary ms-3" type="submit">Ajouter</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Liste des contributeurs -->
  <div class="table-responsive mt-3">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>Nom</th>
          <th>Email</th>
          <th>Rôle</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let contributor of project?.contributors">
          <td>{{ contributor?.userName }}</td>
          <td>{{ contributor?.userEmail }}</td>
          <td>
            <div class="d-flex align-items-center gap-2">
              <span class="badge bg-danger">{{
                getRoleLabel(contributor.role)
              }}</span>
              <!-- Dropdown modification rôle -->
              <div ngbDropdown class="d-inline-block position-static">
                <button
                  class="btn btn-sm btn-secondary px-2 py-0"
                  ngbDropdownToggle
                  id="contributorRole"
                  style="font-size: 0.75rem"
                >
                  Modifier
                </button>

                <div ngbDropdownMenu>
                  <button
                    ngbDropdownItem
                    *ngFor="let role of roles"
                    [hidden]="role === contributor?.role"
                    (click)="onUpdateContributorRole(contributor, role)"
                  >
                    {{ getRoleLabel(role) }}
                  </button>
                </div>
              </div>
            </div>
          </td>
          <td>
            <button
              class="btn btn-sm btn-danger"
              (click)="onDeleteContributor(contributor)"
            >
              Retirer
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
